#ë³´í—˜ ì²­êµ¬ì„œ ì²˜ë¦¬

#ë³´í—˜ ì²­êµ¬ì„œì—ì„œ í•„ìš”í•œ ì •ë³´ë¥¼ ì¶”ì¶œ

import re

insuranceBill = """
ë³´í—˜ ì²­êµ¬ì„œ

í™˜ì ì´ë¦„: í™ê¸¸ë™
í™˜ì ID: 123456789
ìƒë…„ì›”ì¼: 1985-05-20
ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45

ì²­êµ¬ ë‚´ì—­:
---------------------------------
ì§„ë£Œ ë‚ ì§œ: 2024-07-01
ë³‘ëª…: ê°ê¸°
ë¹„ìš©: 50,000ì›

ì§„ë£Œ ë‚ ì§œ: 2024-07-02
ë³‘ëª…: ì•Œë ˆë¥´ê¸°
ë¹„ìš©: 30,000ì›

ì§„ë£Œ ë‚ ì§œ: 2024-07-05
ë³‘ëª…: ë‘í†µ
ë¹„ìš©: 20,000ì›
---------------------------------

ì´ ì²­êµ¬ ê¸ˆì•¡: 100,000ì›
ë³´í—˜ íšŒì‚¬: Sesac ë³´í—˜
ë³´í—˜ ë²ˆí˜¸: INS1234567
"""

def extractInfo(extract):
  info = {} #infoë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ì„ ì–¸

  info["í™˜ì ì´ë¦„"] = re.search(r'í™˜ì ì´ë¦„:\s*(.*)', extract).group(1)
  #extractì—ì„œ ê³µë°±ì„ ë¬´ì‹œí•˜ê³  ë’¤ì— ìˆëŠ” ì„ì˜ì˜ ë¬¸ìì—´ì„ ì¶”ì¶œí•˜ì—¬ info["í™˜ì ì´ë¦„"]ì— ì €ì¥
  info["ìƒë…„ì›”ì¼"] = re.search(r'ìƒë…„ì›”ì¼:\s*([\d-]+)', extract).group(1)
  #ìœ„ì™€ ê°™ì´ ê³µë°± ë¬´ì‹œ -> ìˆ«ìì™€ í•˜ì´í”ˆì´ 1ê°œ ì´ìƒìˆëŠ” ë¬¸ìì—´ì„ ì¶”ì¶œí•˜ì—¬ ì €ì¥
  info["ì£¼ì†Œ"] = re.search(r'ì£¼ì†Œ:\s*(.*)', extract).group(1)
  #ë§¨ ìœ„ ["í™˜ì ì´ë¦„"]ê³¼ ë™ì¼í•œ ë°©ì‹

  info["ì§„ë£Œ ë‚´ì—­"] = re.findall(r'ì§„ë£Œ ë‚ ì§œ:\s*([\d-]+)\s*ë³‘ëª…:\s*(\S+)\s*ë¹„ìš©:\s*([\d,]+)ì›', extract)
  #ê³µë°± ë¬´ì‹œí•˜ê³  ìˆ«ìì™€ í•˜ì´í”ˆì´ ìˆëŠ” 1ê°œ ì´ìƒì˜ ë¬¸ìì—´(ì§„ë£Œ ë‚ ì§œ)
  #~~ ë¬´ì‹œí•˜ê³  ê³µë°±ì´ ì•„ë‹Œ ë¬¸ì 1ê°œ ì´ìƒì˜ ë¬¸ìì—´(ë³‘ëª…)
  #~~~ ìˆ«ìì™€ ,ê°€ 1ê°œ ì´ìƒì˜ ë¬¸ìì—´ (ë¹„ìš©)

  ##findallì€ ë§¤ì¹­ë˜ëŠ” ëª¨ë“  íŒ¨í„´ë“¤ì„ ì°¾ì•„ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•œë‹¤.
   ##(= ì „ì²´ ë¬¸ìì—´ì—ì„œ ì •ê·œ í‘œí˜„ì‹ìœ¼ë¡œ ë§¤ì¹­ë˜ëŠ” ëª¨ë“  íŒ¨í„´ì„ ì°¾ìŒ)
  ##íŒ¨í„´ì´ ê·¸ë£¹ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ í•´ë‹¹ ê·¸ë£¹ì˜ ê°’ë“¤ë¡œ ì´ë£¨ì–´ì§„ íŠœí”Œë¡œ ë°˜í™˜
    ##ìœ„ì—ì„œ ì°¾ì€(ë§¤ì¹­ëœ) íŒ¨í„´ì„ ê·¸ë£¹ìœ¼ë¡œ ë¶„í• ë˜ì–´ íŠœí”Œë¡œ ë°˜í™˜
    ###-> ë§¤ì¹­ëœ íŒ¨í„´ì˜ ë¦¬ìŠ¤íŠ¸ê°€ info["ì§„ë£Œ ë‚´ì—­"]ì— ì €ì¥ë¨
  ### -> ë”°ë¡œ ê·¸ë£¹ìœ¼ë¡œ ì¶”ì¶œí•  í•„ìš” ì—†ìŒ!
  ####info["ì§„ë£Œ ë‚´ì—­"]ë§Œ ë”°ë¡œ ì¶œë ¥í•˜ë©´ [(ì´ëŸ° ì‹ìœ¼ë¡œ ì¶œë ¥ë¨)] => ë¦¬ìŠ¤íŠ¸ ì•ˆì— íŠœí”Œì´ ë“¤ì–´ê°„

  info["ì´ ì²­êµ¬ ê¸ˆì•¡"] = re.search(r'ì´ ì²­êµ¬ ê¸ˆì•¡:\s*([\d,]+)ì›', extract).group(1)
  #~~~~ ìˆ«ìì™€ ,ê°€ 1ê°œ ì´ìƒì˜ ë¬¸ìì—´ì„ ì¶”ì¶œ ~~
  info["ë³´í—˜ íšŒì‚¬"] = re.search(r'ë³´í—˜ íšŒì‚¬:\s*(.*)', extract).group(1)
  #~~~~ ì„ì˜ì˜ ë¬¸ìì—´ì„ ~~~~
  info["ë³´í—˜ ë²ˆí˜¸"] = re.search(r'ë³´í—˜ ë²ˆí˜¸:\s*(\S+)', extract).group(1)
  #~~~~ ê³µë°±ì´ ì•„ë‹Œ ë¬¸ìì—´ì„ ~~~~

  return info

extractedInfo = extractInfo(insuranceBill)

print("ğŸŒ±ë³´í—˜ ì²­êµ¬ ì‹œ í•„ìš”í•œ ì •ë³´ğŸŒ±\n")
for key, value in extractedInfo.items():
  if key == "ì§„ë£Œ ë‚´ì—­":
    print(f"{key}:")
    for detail in value:
      print(f"  - ì§„ë£Œ ë‚ ì§œ: {detail[0]}, ë³‘ëª…: {detail[1]}, ë¹„ìš©: {detail[2]}")
      ##ìœ„ì—ì„œ ë§í–ˆë“¯ì´ info["ì§„ë£Œ ë‚´ì—­"]ì€ ë¦¬ìŠ¤íŠ¸ ì•ˆì— íŠœí”Œë¡œ ë¬¶ì—¬ì„œ ì €ì¥ì´ ë˜ì—ˆê¸° ë•Œë¬¸ì— ì¶œë ¥í•˜ë©´ [(ì´ë ‡ê²Œ ë¨)]
      ###ë”°ë¼ì„œ ë”°ë¡œ forë¬¸ìœ¼ë¡œ ê°’ì„ ì¶œë ¥í•´ì¤˜ì•¼ í•¨
  else:
    print(f"{key}: {value}")